┌──────────────┬────────────────────────────────────────────────┬─────────────────────────────────────────────────────┐
│ 영역 │ 파일 │ 변경 내용 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 의존성 │ pyproject.toml │ shapely>=2.1.2 추가 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 모델 │ app/models/administrative.py │ JSONB → Geometry(srid=4326) (2개 모델) │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 모델 │ app/models/spatial.py │ JSONB → Geometry(srid=4326) (2개 모델) │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 모델 │ app/models/lot.py │ JSONB → Geometry(srid=4326) │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 모델 │ app/models/building.py │ JSONB → Geometry(srid=4326) │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 유틸 │ pipeline/file*utils.py │ geojson_to_wkt() 함수 추가 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 프로세서 │ pipeline/processors/cadastral.py │ GeoJSON dict → WKT 변환 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 프로세서 │ pipeline/processors/administrative_boundary.py │ GeoJSON dict → WKT 변환 (3개 프로세서) │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 프로세서 │ pipeline/processors/road_center_line.py │ GeoJSON dict → WKT 변환 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 프로세서 │ pipeline/processors/use_region_district.py │ GeoJSON dict → WKT 변환 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 프로세서 │ pipeline/processors/gis_building_integrated.py │ GeoJSON dict → WKT 변환 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 로더 │ pipeline/loader.py │ geometry 컬럼 ST_GeomFromText(:geometry, 4326) 처리 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 스키마 │ app/schemas/base.py │ wkb_to_geojson() 유틸 함수 추가 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 스키마 │ app/schemas/spatial.py │ Read 스키마에 WKBElement→GeoJSON validator 추가 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 스키마 │ app/schemas/building.py │ Read 스키마에 WKBElement→GeoJSON validator 추가 │
├──────────────┼────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
│ 마이그레이션 │ alembic/versions/1a02c61ab5a0*...py │ JSONB→PostGIS 데이터 변환 + 공간 인덱스 생성 │
└──────────────┴────────────────────────────────────────────────┴─────────────────────────────────────────────────────┘

데이터 흐름

SHP 파일 → fiona → GeoJSON dict (**geometry**)
↓
shapely.geometry.shape()
↓
WKT 문자열
↓
loader: ST_GeomFromText(WKT, 4326)
↓
PostgreSQL PostGIS Geometry
↓
API 조회 시: WKBElement → to_shape → mapping → GeoJSON dict
